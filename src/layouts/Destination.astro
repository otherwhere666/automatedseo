---
import BaseLayout from './BaseLayout.astro';

interface TravelerType {
  name: string;
  stayIn: string;
  why: string;
  pick: string;
  price: string;
}

interface Props {
  city: string;
  country: string;
  quickTake: string;
  travelerTypes: TravelerType[];
  skip: { name: string; reason: string }[];
  lastUpdated: string;
  image?: string;
  imageAlt?: string;
}

const { city, country, quickTake, travelerTypes, skip, lastUpdated, image, imageAlt } = Astro.props;

const schema = {
  "@context": "https://schema.org",
  "@type": "TravelGuide",
  "about": {
    "@type": "City",
    "name": city,
    "containedInPlace": {
      "@type": "Country",
      "name": country
    }
  },
  "name": `Where to Stay in ${city}: A Curated Guide`,
  "description": quickTake
};
---

<BaseLayout
  title={`Where to Stay in ${city} | Curated Guide | Otherwhere`}
  description={`${quickTake} A curated guide for different types of travelers.`}
  schema={[schema]}
>
  <article class="max-w-3xl mx-auto px-4 py-12">
    <!-- Header -->
    <header class="mb-12">
      <a href="/destinations" class="text-xs uppercase tracking-widest text-ink-tertiary hover:text-ink transition-colors mb-6 block">
        ← ALL DESTINATIONS
      </a>
      <h1 class="text-4xl md:text-5xl font-light tracking-wide mb-4">{city.toUpperCase()}</h1>
      <p class="text-lg text-ink-secondary">{country}</p>
    </header>

    <!-- Hero Image -->
    {image && (
      <div class="mb-12 -mx-4 md:mx-0">
        <img
          src={image}
          alt={imageAlt || `${city}, ${country}`}
          class="w-full h-64 md:h-96 object-cover rounded-card"
          loading="eager"
        />
      </div>
    )}

    <!-- Quick Take -->
    <section class="my-12">
      <h2 class="text-xs uppercase tracking-widest text-ink-tertiary mb-4">QUICK TAKE</h2>
      <p class="text-lg leading-relaxed">{quickTake}</p>
    </section>

    <!-- Traveler Types -->
    {travelerTypes.map((type, index) => (
      <section class="my-12 bg-paper-secondary rounded-xl p-8">
        <h2 class="text-lg font-light tracking-wide mb-6">FOR {type.name.toUpperCase()}</h2>
        <div class="space-y-5">
          <div>
            <p class="text-xs uppercase tracking-widest text-ink-tertiary mb-1">STAY IN</p>
            <p class="text-lg font-medium">{type.stayIn}</p>
          </div>
          <div>
            <p class="text-xs uppercase tracking-widest text-ink-tertiary mb-1">WHY</p>
            <p class="text-ink-secondary leading-relaxed">{type.why}</p>
          </div>
          <div class="border-t border-paper-tertiary pt-5 mt-5">
            <p class="text-xs uppercase tracking-widest text-ink-tertiary mb-1">OUR PICK</p>
            <p class="text-lg font-medium">{type.pick}</p>
            <p class="text-sm text-ink-tertiary mt-1">{type.price}</p>
          </div>
        </div>
      </section>
    ))}

    <!-- Skip These -->
    <section class="my-12">
      <h2 class="text-xs uppercase tracking-widest text-ink-tertiary mb-6">SKIP THESE</h2>
      <ul class="space-y-4">
        {skip.map((s) => (
          <li class="flex items-start gap-3">
            <span class="text-ink-tertiary mt-1">×</span>
            <div>
              <strong class="text-ink">{s.name}</strong>
              <p class="text-ink-secondary text-sm mt-1">{s.reason}</p>
            </div>
          </li>
        ))}
      </ul>
    </section>

    <!-- CTA -->
    <section class="my-16 text-center">
      <h2 class="text-xl font-light tracking-wide mb-4">WANT A PERSONALIZED RECOMMENDATION?</h2>
      <p class="text-ink-secondary mb-8 max-w-md mx-auto">
        Text us with "{city.toUpperCase()}" and your dates. We'll curate options based on your preferences.
      </p>
      <a href="sms:+13239224067" class="btn-primary inline-block">
        TEXT US YOUR DATES
      </a>
    </section>

    <!-- Last Updated -->
    <p class="text-xs uppercase tracking-widest text-ink-tertiary mt-12 text-center">
      Last updated: {lastUpdated} · Prices are approximate
    </p>
  </article>
</BaseLayout>
