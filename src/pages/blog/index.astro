---
import BaseLayout from '../../layouts/BaseLayout.astro';
import BlogHero from '../../components/BlogHero.astro';
import BlogArticleCard from '../../components/BlogArticleCard.astro';
import { getAllPosts } from '../../utils/content';

const posts = getAllPosts();

// Featured post = most recent post (or first with featured: true if we add that later)
const featuredPost = posts[0];

// Remaining posts for the grid (skip the featured one)
const gridPosts = posts.slice(1);

const schemas = [
  {
    "@context": "https://schema.org",
    "@type": "Blog",
    "name": "Otherwhere Blog",
    "description": "Travel insights, booking tips, and destination guides from Otherwhere.",
    "url": "https://blog.otherwhere.world/blog"
  }
];
---

<BaseLayout
  title="Blog | Travel Tips & Destination Guides | Otherwhere"
  description="Travel insights, booking tips, and destination guides. Learn about AI travel planning, find the best places to stay, and discover how personal travel booking works."
  schema={schemas}
>
  {posts.length === 0 ? (
    <!-- Empty state -->
    <section class="py-20">
      <div class="max-w-wide mx-auto px-6">
        <div class="text-center py-16 bg-paper-secondary rounded-card">
          <p class="text-ink-secondary text-lg mb-4">No posts yet. Check back soon!</p>
          <p class="text-ink-tertiary text-sm">New articles are published regularly.</p>
        </div>
      </div>
    </section>
  ) : (
    <>
      <!-- Section 1: Hero (Cream background) -->
      <BlogHero featuredPost={featuredPost} totalPosts={posts.length} />

      <!-- Section 2: Article Grid (Dark background) -->
      <section id="articles" class="section-dark py-16 md:py-20">
        <div class="max-w-wide mx-auto px-6">
          <header class="mb-12">
            <h2 class="font-display text-3xl md:text-4xl text-paper">LATEST ARTICLES</h2>
          </header>

          {gridPosts.length > 0 ? (
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-10">
              {gridPosts.map((post) => (
                <BlogArticleCard post={post} variant="dark" />
              ))}
            </div>
          ) : (
            <p class="text-paper/70 text-center py-8">
              More articles coming soon.
            </p>
          )}
        </div>
      </section>

      <!-- Section 3: CTA (Cream background) -->
      <section class="bg-paper py-20 md:py-24">
        <div class="max-w-wide mx-auto px-6 text-center">
          <h2 class="font-display text-3xl md:text-4xl lg:text-5xl mb-6">
            READY TO BOOK YOUR TRIP?
          </h2>
          <p class="text-ink-secondary text-lg mb-10 max-w-md mx-auto">
            Text us where you want to go. We'll send options. You pick. We book.
          </p>
          <a href="sms:+13239224067" class="btn-pill btn-pill-primary inline-block">
            TEXT US TO START
          </a>
        </div>
      </section>
    </>
  )}
</BaseLayout>
